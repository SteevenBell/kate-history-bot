### –≠—Ç–æ **–≤–∞–∂–Ω–∞—è —á–∞—Å—Ç—å**!

- `volumes` ‚Äî —ç—Ç–æ **–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**.
- `/var/lib/postgresql/data` ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø–∞–ø–∫–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ PostgreSQL.
- –ü—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ `docker-compose down` + `docker-compose up`) –¥–∞–Ω–Ω—ã–µ **–Ω–µ –∏—Å—á–µ–∑–Ω—É—Ç**, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–æ –≤–Ω–µ—à–Ω–µ–º volume (`postgres_data`).

---

## üß™ –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø—Ä–∏ `docker-compose build` –∏–ª–∏ `docker-compose up --build`?

- –≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã **–ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—é—Ç —Ç–æ–ª—å–∫–æ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (`kate-history-bot`)
- **PostgreSQL-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç—Å—è**
- –î–∞–Ω–Ω—ã–µ –≤ –ë–î **–æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ**

‚úÖ –¢–æ –µ—Å—Ç—å:  
**–ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–æ—Ç–∞ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL**

---

## üß® –ê —á—Ç–æ, –µ—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å `docker-compose down`?

- –£–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî **—É–¥–∞–ª—è—é—Ç—Å—è –∏ volumes**, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–Ω–æ–µ

‚ö†Ô∏è **–ü–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:**

| –ö–æ–º–∞–Ω–¥–∞ | –£–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ? |
|--------|------------------|
| `docker-compose up --build` | ‚ùå –ù–µ—Ç |
| `docker-compose down` | ‚úÖ –î–∞ |
| `docker-compose down -v` | ‚úÖ –î–∞ (—è–≤–Ω–æ —É–¥–∞–ª—è–µ—Ç volumes) |
| `docker-compose stop && docker-compose start` | ‚ùå –ù–µ—Ç (—Ç–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞/–∑–∞–ø—É—Å–∫) |

---

## ‚úÖ –ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ `docker-compose down`?

1. –£–∫–∞–∂–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é **–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—É—é —Ç–æ—á–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** (—É–∂–µ –µ—Å—Ç—å)
2. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π `docker-compose down -v`
3. –ú–æ–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `pg_dump`, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–≤–µ—Ä–µ–Ω–Ω—ã–º

---

## üì¶ –ì–¥–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è `postgres_data`?

Docker —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–∏–º —Ç–æ–º–æ–º. –ü—É—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –û–°:

| –û–° | –ü—É—Ç—å –∫ –¥–∞–Ω–Ω—ã–º |
|----|---------------|
| Linux | `/var/lib/docker/volumes/kate_history_postgres_data/_data` |
| macOS / Windows (—á–µ—Ä–µ–∑ Docker Desktop) | –í–Ω—É—Ç—Ä–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã Docker (–Ω–µ –≤–∏–¥–Ω–æ –Ω–∞–ø—Ä—è–º—É—é) |

–ù–æ —Ç–µ–±–µ **–Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ —Ñ–∞–π–ª—ã** ‚Äî –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ `psql`, DBeaver, DataGrip –∏–ª–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

---

## üß† –ü—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–æ–≥–∏–∏

–ü—Ä–µ–¥—Å—Ç–∞–≤—å:
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å PostgreSQL = –∫–∞–∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –Ω–æ—É—Ç–±—É–∫
- Volume `postgres_data` = –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–π –∂—ë—Å—Ç–∫–∏–π –¥–∏—Å–∫
- –ö–æ–≥–¥–∞ —Ç—ã –º–µ–Ω—è–µ—à—å –Ω–æ—É—Ç–±—É–∫ (–ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—à—å –∏–ª–∏ —É–¥–∞–ª—è–µ—à—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä), —Ç—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∫–ª—é—á–∞–µ—à—å –µ–≥–æ –∫ —Ç–æ–º—É –∂–µ –¥–∏—Å–∫—É ‚Üí –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ.

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–±–æ—Ç–µ

| –ß—Ç–æ –¥–µ–ª–∞—Ç—å | –ö–∞–∫ |
|-----------|-----|
| –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–µ–∫—Ç | `docker-compose up -d` |
| –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å | `docker-compose stop` |
| –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –±–æ—Ç–∞ | `docker-compose build kate-history-bot && docker-compose up -d` |
| –£–¥–∞–ª—è—Ç—å –≤—Å—ë, –∫—Ä–æ–º–µ –ë–î | –°–Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞–π –±—ç–∫–∞–ø, –ø–æ—Ç–æ–º `docker-compose down`, –Ω–æ **–Ω–µ –¥–æ–±–∞–≤–ª—è–π `-v`**, –µ—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ |
| –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ë–î | `docker logs kate-history-postgres` |
| –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î | –ß–µ—Ä–µ–∑ DBeaver, DataGrip –∏–ª–∏ `psql` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ |

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

1. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç:
   ```bash
   docker-compose up -d
   ```

2. –°–æ–∑–¥–∞–π —Ç–∞–±–ª–∏—Ü—É –∏ –≤—Å—Ç–∞–≤—å –¥–∞–Ω–Ω—ã–µ:
   ```sql
   CREATE TABLE test (id SERIAL PRIMARY KEY, name TEXT);
   INSERT INTO test (name) VALUES ('–ü—Ä–∏–≤–µ—Ç');
   ```

3. –û—Å—Ç–∞–Ω–æ–≤–∏ –∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏ –±–æ—Ç–∞:
   ```bash
   docker-compose down
   docker-compose build kate-history-bot
   docker-compose up -d
   ```

4. –ü—Ä–æ–≤–µ—Ä—å, –µ—Å—Ç—å –ª–∏ –¥–∞–Ω–Ω—ã–µ:
   ```sql
   SELECT * FROM test;
   ```
   ‚Üí –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ `–ü—Ä–∏–≤–µ—Ç`.

‚úÖ –ï—Å–ª–∏ –≤—ã–≤–æ–¥ –µ—Å—Ç—å ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å ‚Üí –∑–Ω–∞—á–∏—Ç `volume` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?

–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è:
- –ü–æ–∫–∞–∑–∞–ª, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –ë–î –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞?
- –ù–∞—Å—Ç—Ä–æ–∏–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö?
- –ü–æ–∫–∞–∑–∞–ª, –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î —á–µ—Ä–µ–∑ DBeaver –∏–ª–∏ psql?
- –û–±—ä—è—Å–Ω–∏–ª, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `init.sql` –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î?

–í—ã–±–µ—Ä–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Äî –∏ —è –ø–æ–º–æ–≥—É! üòä